<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Study Spark AI</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto+Slab:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script type="importmap">
{
  "imports": {
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.27.0",
    "react-router-dom": "https://aistudiocdn.com/react-router-dom@^7.9.4",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "pdfjs-dist": "https://aistudiocdn.com/pdfjs-dist@5.4.394",
    "react-dropzone": "https://aistudiocdn.com/react-dropzone@^14.3.8",
    "jspdf": "https://aistudiocdn.com/jspdf@^2.5.1"
  }
}
</script>
  <script>
    tailwind.config = {
      darkMode: 'class', // Enable class-based dark mode
      theme: {
        extend: {
          colors: {
            primary: {
              50: 'rgb(var(--color-primary-50) / <alpha-value>)',
              100: 'rgb(var(--color-primary-100) / <alpha-value>)',
              200: 'rgb(var(--color-primary-200) / <alpha-value>)',
              300: 'rgb(var(--color-primary-300) / <alpha-value>)',
              400: 'rgb(var(--color-primary-400) / <alpha-value>)',
              500: 'rgb(var(--color-primary-500) / <alpha-value>)',
              600: 'rgb(var(--color-primary-600) / <alpha-value>)',
              700: 'rgb(var(--color-primary-700) / <alpha-value>)',
              800: 'rgb(var(--color-primary-800) / <alpha-value>)',
              900: 'rgb(var(--color-primary-900) / <alpha-value>)',
              950: 'rgb(var(--color-primary-950) / <alpha-value>)',
            },
          }
        }
      }
    }
  </script>
  <style type="text/tailwindcss">
    @layer base {
      :root, html[data-accent="indigo"] {
        --color-primary-50: 238 242 255;
        --color-primary-100: 224 231 255;
        --color-primary-200: 199 210 254;
        --color-primary-300: 165 180 252;
        --color-primary-400: 129 140 248;
        --color-primary-500: 99 102 241;
        --color-primary-600: 79 70 229;
        --color-primary-700: 67 56 202;
        --color-primary-800: 55 48 163;
        --color-primary-900: 49 46 129;
        --color-primary-950: 30 27 75;
      }
      html[data-accent="sky"] {
        --color-primary-50: 240 249 255;
        --color-primary-100: 224 242 254;
        --color-primary-200: 186 230 253;
        --color-primary-300: 125 211 252;
        --color-primary-400: 56 189 248;
        --color-primary-500: 14 165 233;
        --color-primary-600: 2 132 199;
        --color-primary-700: 3 105 161;
        --color-primary-800: 7 89 133;
        --color-primary-900: 12 74 110;
        --color-primary-950: 8 51 68;
      }
      html[data-accent="rose"] {
        --color-primary-50: 255 241 242;
        --color-primary-100: 255 228 230;
        --color-primary-200: 254 205 211;
        --color-primary-300: 253 164 175;
        --color-primary-400: 251 113 133;
        --color-primary-500: 244 63 94;
        --color-primary-600: 225 29 72;
        --color-primary-700: 190 18 60;
        --color-primary-800: 159 18 57;
        --color-primary-900: 136 19 55;
        --color-primary-950: 76 5 25;
      }
      html[data-accent="emerald"] {
        --color-primary-50: 236 253 245;
        --color-primary-100: 209 250 229;
        --color-primary-200: 167 243 208;
        --color-primary-300: 110 231 183;
        --color-primary-400: 52 211 153;
        --color-primary-500: 16 185 129;
        --color-primary-600: 5 150 105;
        --color-primary-700: 4 120 87;
        --color-primary-800: 6 95 70;
        --color-primary-900: 6 78 59;
        --color-primary-950: 2 44 34;
      }
      html[data-accent="orange"] {
        --color-primary-50: 255 247 237;
        --color-primary-100: 255 237 213;
        --color-primary-200: 254 215 170;
        --color-primary-300: 253 186 116;
        --color-primary-400: 251 146 60;
        --color-primary-500: 249 115 22;
        --color-primary-600: 234 88 12;
        --color-primary-700: 194 65 12;
        --color-primary-800: 154 52 18;
        --color-primary-900: 124 45 18;
        --color-primary-950: 69 10 7;
      }
      html.dark {
        color-scheme: dark;
      }
      /* Font settings */
      html[data-font="modern"] body { font-family: 'Inter', sans-serif; }
      html[data-font="classic"] body { font-family: 'Lora', serif; }
      html[data-font="study"] body { font-family: 'Roboto Slab', serif; }
      
      .icon-container {
        transform-style: preserve-3d;
        transition: transform 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      }
      .icon-container:hover .icon-interactive {
        transform: translateZ(15px) rotateY(-5deg) rotateX(10deg);
      }
      .icon-container:active .icon-interactive {
        transform: translateZ(5px);
        transition-duration: 0.1s;
      }
      .icon-interactive {
        transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      }
      /* Prose styles for summary highlighting */
      .prose mark, .prose .highlight {
        background-color: rgb(var(--color-primary-200) / 0.5);
        padding: 0.1em 0.2em;
        border-radius: 0.2em;
        color: inherit;
      }
      html.dark .prose mark, html.dark .prose .highlight {
        background-color: rgb(var(--color-primary-800) / 0.6);
      }
      /* Text highlighting colors */
      mark.highlight-yellow, .highlight-yellow { background-color: rgba(250, 204, 21, 0.5); }
      mark.highlight-green, .highlight-green { background-color: rgba(74, 222, 128, 0.5); }
      mark.highlight-pink, .highlight-pink { background-color: rgba(244, 114, 182, 0.5); }
      mark.highlight-blue, .highlight-blue { background-color: rgba(96, 165, 250, 0.5); }
      
      html.dark mark.highlight-yellow, html.dark .highlight-yellow { background-color: rgba(250, 204, 21, 0.4); }
      html.dark mark.highlight-green, html.dark .highlight-green { background-color: rgba(74, 222, 128, 0.4); }
      html.dark mark.highlight-pink, html.dark .highlight-pink { background-color: rgba(244, 114, 182, 0.4); }
      html.dark mark.highlight-blue, html.dark .highlight-blue { background-color: rgba(96, 165, 250, 0.4); }

      /* Level-based backgrounds */
      .level-bg { transition: background-color 1s ease-in-out; }
      .level-bg-1 { --bg-color: 248 250 252; } /* slate-50 */
      .level-bg-2 { --bg-color: 240 249 255; } /* sky-50 */
      .level-bg-3 { --bg-color: 236 253 245; } /* emerald-50 */
      .level-bg-4 { --bg-color: 255 247 237; } /* orange-50 */
      .level-bg-5 { --bg-color: 255 241 242; } /* rose-50 */
      html.dark .level-bg-1 { --bg-color: 15 23 42; } /* slate-900 */
      html.dark .level-bg-2 { --bg-color: 12 74 110; opacity: 0.2; }
      html.dark .level-bg-3 { --bg-color: 6 78 59; opacity: 0.2; }
      html.dark .level-bg-4 { --bg-color: 124 45 18; opacity: 0.2; }
      html.dark .level-bg-5 { --bg-color: 136 19 55; opacity: 0.2; }
      
      .main-bg-transition {
        background-color: rgb(var(--bg-color));
      }
      .bg-transition {
        transition: background 1.5s ease-in-out;
      }
      /* Custom Backgrounds */
      .bg-sunset {
        background: linear-gradient(120deg, #f6d365 0%, #fda085 100%);
      }
      .bg-galaxy {
          background-color: #00000c;
          background-image:
            radial-gradient(white, rgba(255,255,255,.2) 2px, transparent 40px),
            radial-gradient(white, rgba(255,255,255,.15) 1px, transparent 30px),
            radial-gradient(white, rgba(255,255,255,.1) 2px, transparent 40px),
            radial-gradient(rgba(255,255,255,.4), rgba(255,255,255,.1) 2px, transparent 30px);
          background-size: 550px 550px, 350px 350px, 250px 250px, 150px 150px; 
          background-position: 0 0, 40px 60px, 130px 270px, 70px 100px;
          animation: galaxy-stars 200s linear infinite;
      }
      @keyframes galaxy-stars {
          from { background-position: 0 0, 40px 60px, 130px 270px, 70px 100px; }
          to { background-position: -550px -550px, -310px -290px, -120px -180px, 0px -450px; }
      }
      .bg-office {
          background: linear-gradient(to top, #cfd9df 0%, #e2ebf0 100%);
      }
      html.dark .bg-sunset {
          background: linear-gradient(120deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
      }
      html.dark .bg-office {
          background: linear-gradient(to top, #3a3a3a 0%, #1c1c1c 100%);
      }

      /* Avatar selection */
      .avatar-picker-item {
        transition: all 0.2s ease-in-out;
      }
      .avatar-picker-item.selected {
        transform: scale(1.1);
        box-shadow: 0 0 0 4px rgb(var(--color-primary-500));
      }
      /* Confetti animation */
      .confetti-piece {
        position: absolute;
        width: 8px;
        height: 16px;
        background: #f00;
        top: 0;
        opacity: 0;
        animation: confetti-fall 3s ease-out forwards;
      }
      @keyframes confetti-fall {
        0% { transform: translateY(-10vh) rotateZ(0deg); opacity: 1; }
        100% { transform: translateY(100vh) rotateZ(720deg); opacity: 0; }
      }
      /* Focus Mode */
      .focus-mode .hide-in-focus {
        display: none !important;
      }
    }
  </style>
</head>
<body class="bg-slate-50 dark:bg-slate-900">
  <div id="root"></div>
  <noscript>You need to enable JavaScript to run this app.</noscript>
  <script type="module" src="index.tsx"></script>
</body>
</html>